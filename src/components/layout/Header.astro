---
import ThemeToggle from "../ThemeToggle.astro";
import { Image } from "@astrojs/image/components";
import aboutImg from "../../assets/mehdi4j.png";

const url = new URL(Astro.request.url);

const menuLinks = [
	{
		title: "Home",
		path: "/",
	},
	{
		title: "Blog",
		path: "/posts",
	},
	{
		title: "About",
		path: "/about",
	},
];
---

<script>
	import { toggleClass } from "@/utils";

	document.addEventListener("DOMContentLoaded", () => {
		const header = document.getElementById("main-header") as HTMLElement;
		const toggleMenuButton = document.getElementById("toggle-navigation-menu") as HTMLButtonElement;
		let menuOpen = false;

		toggleMenuButton.addEventListener("click", () => {
			toggleClass(header, "menu-open");
			menuOpen = !menuOpen;
			toggleMenuButton.setAttribute("aria-expanded", menuOpen.toString());
		});
	});
</script>

<header id="main-header" class="group relative mb-28 flex items-center sm:pl-[4.5rem]">
	<div class="flex sm:flex-col">
		<a
			href="/"
			class="inline-flex items-center grayscale hover:filter-none sm:relative sm:inline-block"
			aria-current={url.pathname === "/" ? "page" : false}
		>
			<!-- <svg
				class="mr-3 h-10 w-6 sm:absolute sm:left-[-4.5rem] sm:mr-0 sm:h-20 sm:w-12"
				aria-hidden="true"
				focusable="false"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 272 480"
				><defs
					><style>
						.cls-1 {
							isolation: isolate;
						}
						.cls-2 {
							fill: #3f3fba;
						}
						.cls-3 {
							fill: #cb4100;
						}
						.cls-4 {
							fill: #ff5d00;
						}
						.cls-5 {
							fill: #00c78a;
						}
					</style></defs
				><title>Logo</title><g class="cls-1"
					><path
						class="cls-2"
						d="M316.08,406.4l-21.14-12.29a1.07,1.07,0,0,1-.35-1l21.14,12.29A1.07,1.07,0,0,0,316.08,406.4Z"
						transform="translate(-294.41 -308.93)"></path><path
						class="cls-3"
						d="M345.95,388l-0.1-35.76L324.7,339.93l0.1,35.76a1.07,1.07,0,0,0,.36,1L346.3,389A1.07,1.07,0,0,1,345.95,388Z"
						transform="translate(-294.41 -308.93)"></path><polygon
						class="cls-3"
						points="40.97 64.13 19.82 51.84 27.39 7.83 48.53 20.12 40.97 64.13"></polygon><path
						class="cls-3"
						d="M332.18,396.08l-6.95-32-21.14-12.29,6.95,32a1.11,1.11,0,0,0,.44.73l21.14,12.29A1.11,1.11,0,0,1,332.18,396.08Z"
						transform="translate(-294.41 -308.93)"></path><path
						class="cls-4"
						d="M333.47,309a1.07,1.07,0,0,0-1,.18l-9.13,5.27a3.14,3.14,0,0,0-1.52,2.31l21.14,12.29a3.14,3.14,0,0,1,1.52-2.31l9.13-5.27a1.07,1.07,0,0,1,1-.18Z"
						transform="translate(-294.41 -308.93)"></path><polygon
						class="cls-3"
						points="21.32 96.49 0.17 84.2 0 23.81 21.14 36.1 21.32 96.49"></polygon><path
						class="cls-4"
						d="M306,324.91a1.09,1.09,0,0,0-1.08.17l-9.13,5.27a2.64,2.64,0,0,0-1.38,2.39L315.55,345a2.64,2.64,0,0,1,1.38-2.39l9.13-5.27a1.09,1.09,0,0,1,1.08-.17Z"
						transform="translate(-294.41 -308.93)"></path><path
						class="cls-5"
						d="M353.59,321.48c0.9-.52,1.38-0.24,1.38.8l0.17,60.39a2.63,2.63,0,0,1-1.37,2.39l-6.44,3.72c-0.89.52-1.38,0.24-1.38-.8l-0.1-35.76-0.49.28-6.75,39.87a3.14,3.14,0,0,1-1.52,2.31l-3.39,2c-0.83.48-1.31,0.28-1.52-.55l-6.95-32-0.49.28,0.1,35.76a2.64,2.64,0,0,1-1.38,2.39l-6.36,3.67c-0.9.52-1.39,0.24-1.39-.79L315.55,345a2.64,2.64,0,0,1,1.38-2.39l9.13-5.27c0.83-.48,1.31-0.28,1.52.55l7.79,35.14,7.57-44a3.14,3.14,0,0,1,1.52-2.31Z"
						transform="translate(-294.41 -308.93)"></path></g
				></svg
			> -->
			<!-- <svg
				class="mr-3 h-10 w-6 sm:absolute sm:left-[-4.5rem] sm:mr-0 sm:h-20 sm:w-12"
				aria-hidden="true"
				focusable="false"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 272 480"
			>
				<title>Logo</title>
				<path
					d="M181.334 93.333v-40L226.667 80v40l-45.333-26.667ZM136.001 53.333 90.667 26.667v426.666L136.001 480V53.333Z"
					fill="#B04304"></path>
				<path
					d="m136.001 119.944 45.333-26.667 45.333 26.667-45.333 26.667-45.333-26.667ZM90.667 26.667 136.001 0l45.333 26.667-45.333 26.666-45.334-26.666ZM181.334 53.277l45.333-26.666L272 53.277l-45.333 26.667-45.333-26.667ZM0 213.277l45.333-26.667 45.334 26.667-45.334 26.667L0 213.277ZM136 239.944l-45.333-26.667v53.333L136 239.944Z"
					fill="#FF5D01"></path>
				<path
					d="m136 53.333 45.333-26.666v120L226.667 120V80L272 53.333V160l-90.667 53.333v240L136 480V306.667L45.334 360V240l45.333-26.667v53.334L136 240V53.333Z"
					fill="#53C68C"></path>
				<path d="M45.334 240 0 213.334v120L45.334 360V240Z" fill="#B04304"></path>
			</svg> -->
			<Image
				src={aboutImg}
				width={100}
				height={150}
				alt="A cartoon cactus looking at the 'Astro.build' logo"
				loading="eager"
				class="mr-3 h-10 w-6 sm:absolute sm:left-[-4.5rem] sm:mr-0 sm:h-20 sm:w-12"
			/>
			<span class="text-xl font-bold sm:text-2xl">M4J</span>
		</a>
		<nav
			id="navigation-menu"
			class="absolute -inset-x-4 top-14 hidden flex-col items-end gap-y-4 rounded-md bg-[color:var(--theme-menu-bg)] py-4 text-accent shadow backdrop-blur group-[.menu-open]:z-50 group-[.menu-open]:flex sm:static sm:z-auto sm:mt-1 sm:-ml-4 sm:flex sm:flex-row sm:items-center sm:divide-x sm:divide-dashed sm:divide-accent sm:rounded-none sm:bg-transparent sm:py-0 sm:shadow-none sm:backdrop-blur-none"
			aria-label="Main menu"
		>
			{
				menuLinks.map((link) => (
					<a
						href={link.path}
						class="py-4 px-4 sm:py-0 sm:hover:underline"
						aria-current={url.pathname === link.path ? "page" : false}
						rel="prefetch"
					>
						{link.title}
					</a>
				))
			}
		</nav>
	</div>
	<ThemeToggle />
	<button
		id="toggle-navigation-menu"
		class="group relative ml-8 h-7 w-7 sm:invisible sm:hidden"
		type="button"
		aria-label="Open main menu"
		aria-expanded="false"
		aria-haspopup="menu"
	>
		<svg
			id="line-svg"
			class="absolute top-1/2 left-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 transition-all group-aria-expanded:scale-0 group-aria-expanded:opacity-0"
			aria-hidden="true"
			focusable="false"
			xmlns="http://www.w3.org/2000/svg"
			fill="none"
			viewBox="0 0 24 24"
			stroke-width="1.5"
			stroke="currentColor"
			data-hide="false"
		>
			<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9h16.5m-16.5 6.75h16.5"></path>
		</svg>
		<svg
			id="cross-svg"
			class="absolute top-1/2 left-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100"
			class="text-accent"
			aria-hidden="true"
			focusable="false"
			xmlns="http://www.w3.org/2000/svg"
			fill="none"
			viewBox="0 0 24 24"
			stroke-width="1.5"
			stroke="currentColor"
			data-hide="true"
		>
			<path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
		</svg>
	</button>
</header>
